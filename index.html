<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0F172A">
  <meta name="description" content="í•˜ì´íƒ‘ë¶€ë™ì‚° í†µí•© ê³„ì‚°ê¸° - ìƒê°€ ìˆ˜ìµë¥ , ì„ëŒ€ë£Œ ì¸ìƒ, ì·¨ë“ì„¸, ì¤‘ê°œìˆ˜ìˆ˜ë£Œ ê³„ì‚°">
  <title>í•˜ì´íƒ‘ë¶€ë™ì‚° í†µí•© ê³„ì‚°ê¸°</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
  <style>
:root {
  --bg: #0B1220;
  --surface: #0F172A;
  --card: #111C2E;
  --card2: #0E1A2B;
  --border: rgba(148,163,184,0.18);
  --text: #F8FAFC;
  --muted: #94A3B8;
  --muted2: rgba(148,163,184,0.7);
  --primary: #2563EB;
  --primary2: #1D4ED8;
  --accent: #38BDF8;
  --success: #22C55E;
  --danger: #EF4444;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  font-size: 15px;
  font-weight: 400;
  line-height: 1.6;
  letter-spacing: -0.3px;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  padding: 20px;
}

.container {
  max-width: 1160px;
  margin: 0 auto;
}

/* Header */
header {
  background: linear-gradient(135deg, #2563eb 0%, #3b82f6 50%, #8b5cf6 100%);
  border: 1px solid transparent;
  border-radius: 20px;
  padding: 32px;
  margin-bottom: 32px;
  box-shadow: 0 10px 40px rgba(37, 99, 235, 0.3);
}

header h1 {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 6px;
  color: #FFFFFF;
  text-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

header p {
  font-size: 15px;
  color: rgba(255, 255, 255, 0.95);
}

/* Tabs */
.tabs {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  margin-bottom: 32px;
}

.tab-button {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 18px 20px;
  color: var(--muted);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.tab-button:hover {
  transform: translateY(-2px);
  border-color: var(--primary);
  background: var(--card2);
}

.tab-button.active {
  background: var(--primary);
  border-color: var(--primary);
  color: var(--text);
}

.tab-button.active:hover {
  background: var(--primary2);
  border-color: var(--primary2);
}

.tab-button:active {
  transform: scale(0.98);
}

/* Tool Section */
.tool-section {
  display: none;
}

.tool-section.active {
  display: block;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.tool-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 28px;
  margin-bottom: 32px;
}

.tool-header {
  margin-bottom: 24px;
}

.tool-header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 6px;
}

.tool-header p {
  font-size: 14px;
  color: var(--muted);
}

/* Grid */
.tool-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 24px;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.field label {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}

.field small {
  font-size: 13px;
  color: var(--muted2);
  margin-top: -4px;
}

.field input,
.field select {
  background: var(--card2);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px 16px;
  font-size: 15px;
  color: var(--text);
  font-family: inherit;
  transition: all 0.2s;
}

.field input::placeholder {
  color: var(--muted2);
}

.field input:focus,
.field select:focus {
  outline: none;
  border-color: rgba(37,99,235,0.65);
  box-shadow: 0 0 0 3px rgba(37,99,235,0.12);
}

.field input[readonly] {
  cursor: not-allowed;
  opacity: 0.6;
}

/* Input with unit */
.input-with-unit {
  position: relative;
}

.input-with-unit input {
  padding-right: 50px;
}

.input-with-unit .unit {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--muted);
  font-weight: 600;
  font-size: 14px;
  pointer-events: none;
}

/* Buttons */
.tool-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.btn-primary {
  background: linear-gradient(135deg, #F59E0B, #D97706);
  border: none;
  border-radius: 14px;
  padding: 14px 28px;
  color: #FFFFFF;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
  box-shadow: 0 2px 8px rgba(245, 158, 11, 0.25);
}

.btn-primary:hover {
  background: linear-gradient(135deg, #D97706, #B45309);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.35);
}

.btn-primary:active {
  transform: scale(0.98);
}

.btn-secondary {
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px 24px;
  color: var(--muted);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}

.btn-secondary:hover {
  border-color: var(--muted);
  background: var(--card2);
}

/* Results */
.result-card {
  background: linear-gradient(145deg, var(--card), var(--card2));
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 28px;
  margin-top: 24px;
}

.result-main {
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 20px;
}

.result-main .result-highlight {
  font-size: 28px;
  font-weight: 700;
  color: var(--accent);
  font-variant-numeric: tabular-nums;
  display: block;
  margin-top: 8px;
}

.result-sub {
  font-size: 14px;
  color: var(--muted);
  line-height: 1.8;
}

.result-sub strong {
  color: var(--text);
  font-weight: 600;
}

.footer-note {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid var(--border);
  font-size: 13px;
  color: var(--muted2);
  line-height: 1.6;
}

/* Yield tabs */
.yield-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
  background: var(--card2);
  padding: 4px;
  border-radius: 14px;
}

.yield-tab {
  flex: 1;
  padding: 12px 20px;
  border: none;
  background: transparent;
  color: var(--muted);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  border-radius: 10px;
  transition: all 0.2s;
  font-family: inherit;
}

.yield-tab.active {
  background: var(--primary);
  color: var(--text);
}

/* Result card clean */
.result-card-clean {
  background: linear-gradient(145deg, var(--card), var(--card2));
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 28px;
  margin-top: 24px;
}

.result-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 0;
  border-bottom: 1px solid var(--border);
}

.result-row:last-child {
  border-bottom: none;
}

.result-row.highlight-row {
  background: rgba(37,99,235,0.08);
  margin: 8px -28px;
  padding: 18px 28px;
  border-radius: 14px;
  border: none;
}

.result-label {
  font-size: 14px;
  color: var(--muted);
  font-weight: 500;
}

.result-value {
  font-size: 16px;
  font-weight: 700;
  color: var(--text);
  font-variant-numeric: tabular-nums;
}

.result-value.blue {
  color: var(--accent);
}

.result-value.red {
  color: var(--danger);
  font-size: 24px;
}

.result-divider {
  height: 1px;
  background: var(--border);
  margin: 20px 0;
}

.result-info {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: rgba(37,99,235,0.06);
  border-radius: 14px;
  border-left: 3px solid var(--primary);
}

.info-text {
  font-size: 13px;
  color: var(--muted);
  line-height: 1.6;
}

/* Rent result table */
.rent-result-table {
  margin-top: 24px;
}

.rent-result-table table {
  width: 100%;
  border-collapse: collapse;
  background: var(--card2);
  border-radius: 14px;
  overflow: hidden;
}

.rent-result-table th {
  padding: 14px;
  text-align: center;
  font-weight: 600;
  font-size: 14px;
  color: var(--text);
  background: var(--card);
  border-bottom: 1px solid var(--border);
}

.rent-result-table td {
  padding: 14px;
  text-align: center;
  font-size: 14px;
  color: var(--text);
  border-bottom: 1px solid var(--border);
  font-variant-numeric: tabular-nums;
}

.rent-result-table td:first-child {
  background: var(--card);
  font-weight: 600;
  text-align: left;
  padding-left: 20px;
}

.rent-result-table .highlight-row {
  background: rgba(37,99,235,0.08);
  font-weight: 700;
}

.rent-result-table .highlight-row td {
  color: var(--accent);
  font-size: 15px;
  border-bottom: none;
}

/* Tax result grid */
.tax-result-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 20px;
}

.tax-result-left {
  padding-right: 24px;
  border-right: 1px solid var(--border);
}

.tax-result-right {
  padding-left: 24px;
}

.tax-simple-info {
  margin-top: 16px;
  padding: 16px;
  background: rgba(37,99,235,0.06);
  border-radius: 14px;
  border-left: 3px solid var(--primary);
}

.tax-simple-info strong {
  color: var(--accent);
  font-size: 15px;
}

.tax-simple-info div {
  margin-top: 8px;
  font-size: 14px;
  color: var(--muted);
}

/* Footer */
footer {
  margin-top: 48px;
  padding: 24px 0;
  border-top: 1px solid var(--border);
  text-align: center;
}

footer-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-size: 15px;
}

.footer-brand {
  font-weight: 600;
  color: var(--text);
}

.footer-divider {
  color: var(--muted);
}

.footer-phone {
  color: var(--primary);
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s;
}

.footer-phone:hover {
  color: var(--primary2);
}

/* Mobile */
@media (max-width: 768px) {
  .container {
    padding: 0;
  }

  header {
    padding: 24px 20px;
  }

  header h1 {
    font-size: 24px;
  }

  .tabs {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }

  .tab-button {
    padding: 14px 12px;
    font-size: 14px;
  }

  .tool-card {
    padding: 20px;
  }

  .tool-grid {
    grid-template-columns: 1fr;
  }

  .tax-result-grid {
    grid-template-columns: 1fr;
  }

  .tax-result-left {
    padding-right: 0;
    border-right: none;
    border-bottom: 1px solid var(--border);
    padding-bottom: 16px;
  }

  .tax-result-right {
    padding-left: 0;
  }

  .result-row.highlight-row {
    margin: 8px -20px;
    padding: 18px 20px;
  }
}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>í•˜ì´íƒ‘ë¶€ë™ì‚° í†µí•© ê³„ì‚°ê¸°</h1>
      <p>ìƒê°€ íˆ¬ìë¶€í„° ì„ëŒ€ë£Œ, ì·¨ë“ì„¸, ì¤‘ê°œìˆ˜ìˆ˜ë£Œê¹Œì§€ í•œ ë²ˆì— ê³„ì‚°í•˜ì„¸ìš”</p>
    </header>

    <nav class="tabs">
      <button class="tab-button active" data-tool="yield">
        <span>ğŸ“ˆ</span>
        <span>ìƒê°€ ìˆ˜ìµë¥ </span>
      </button>
      <button class="tab-button" data-tool="rent">
        <span>ğŸ“Š</span>
        <span>ì„ëŒ€ë£Œ ì¸ìƒ</span>
      </button>
      <button class="tab-button" data-tool="tax">
        <span>ğŸ’°</span>
        <span>ì·¨ë“ì„¸</span>
      </button>
      <button class="tab-button" data-tool="fee">
        <span>ğŸ¤</span>
        <span>ì¤‘ê°œìˆ˜ìˆ˜ë£Œ</span>
      </button>
    </nav>

    <!-- 1. ìƒê°€ ìˆ˜ìµë¥  -->
    <section id="tool-yield" class="tool-section active">
      <div class="tool-card">
        <div class="tool-header">
          <h2>ìƒê°€ ìˆ˜ìµë¥  ê³„ì‚°ê¸°</h2>
          <p>ì •í™•í•œ íˆ¬ì ë¶„ì„ìœ¼ë¡œ ì„±ê³µì ì¸ ìƒê°€ íˆ¬ìë¥¼ ì‹¤í˜„í•˜ì„¸ìš”</p>
        </div>

        <div class="yield-tabs">
          <button class="yield-tab active">ìˆœìˆ˜ìµë¥ </button>
          <button class="yield-tab">ëŒ€ì¶œ í¬í•¨</button>
        </div>

        <div class="tool-grid">
          <div class="field">
            <label>ë§¤ë§¤ê°€</label>
            <div class="input-with-unit">
              <input type="number" id="price" placeholder="43000" oninput="updateYieldAcqTax()">
              <span class="unit">ë§Œì›</span>
            </div>
          </div>
          <div class="field">
            <label>ì›” ì„ëŒ€ë£Œ</label>
            <div class="input-with-unit">
              <input type="number" id="rent" placeholder="200">
              <span class="unit">ë§Œì›</span>
            </div>
          </div>
          <div class="field">
            <label>ë³´ì¦ê¸ˆ</label>
            <div class="input-with-unit">
              <input type="number" id="deposit" placeholder="3000">
              <span class="unit">ë§Œì›</span>
            </div>
          </div>
          <div class="field">
            <label>ì·¨ë“ì„¸</label>
            <div class="input-with-unit">
              <input type="text" id="acqTax" readonly placeholder="ìë™ê³„ì‚°">
              <span class="unit">ë§Œì›</span>
            </div>
            <small>ì·¨ë“ì„¸ 4.6% ìë™ê³„ì‚°</small>
          </div>
        </div>

        <div class="tool-actions">
          <button class="btn-primary" onclick="calcYield()">ê³„ì‚°í•˜ê¸°</button>
          <button class="btn-secondary" onclick="resetYield()">ì´ˆê¸°í™”</button>
        </div>

        <div id="yieldResult" class="result-card-clean" style="display:none;">
          <div class="result-row">
            <span class="result-label">ì—°ê°„ ì„ëŒ€ìˆ˜ìµ</span>
            <span class="result-value blue" id="yieldAnnual"></span>
          </div>
          <div class="result-row">
            <span class="result-label">ì‹¤íˆ¬ìê¸ˆ (ë³´ì¦ê¸ˆ ì œì™¸)</span>
            <span class="result-value blue" id="yieldInvest"></span>
          </div>
          <div class="result-row highlight-row">
            <span class="result-label">ì‹¤ì§ˆ ìˆ˜ìµë¥ </span>
            <span class="result-value red" id="yieldRate"></span>
          </div>
          <div class="result-divider"></div>
          <div class="result-info">
            <span>ğŸ’¡</span>
            <span class="info-text" id="yieldTaxInfo"></span>
          </div>
          <div class="footer-note">
            ì´ ê³„ì‚°ì€ í‘œë©´ìˆ˜ìµë¥  ê¸°ì¤€ì…ë‹ˆë‹¤. ì‹¤ì œ ìˆœìˆ˜ìµë¥ ì€ ê´€ë¦¬ë¹„, ì¬ì‚°ì„¸, ê³µì‹¤, ëŒ€ì¶œì´ì ë“±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </section>

    <!-- 2. ì„ëŒ€ë£Œ ì¸ìƒ -->
    <section id="tool-rent" class="tool-section">
      <div class="tool-card">
        <div class="tool-header">
          <h2>ì„ëŒ€ë£Œ ì¸ìƒ ê³„ì‚°ê¸°</h2>
          <p>ì„ëŒ€ì°¨ ê°±ì‹  ì‹œ 5% ìƒí•œì œ ë° ì „ì›”ì„¸ ì „í™˜ìœ¨ì„ ì ìš©í•œ ì¸ìƒ í•œë„ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤</p>
        </div>

        <div class="tool-grid">
          <div class="field">
            <label>í˜„ì¬ ë³´ì¦ê¸ˆ</label>
            <input type="text" id="rentDeposit" placeholder="ì˜ˆ: 5,000,000" oninput="formatNumber(this)">
            <small>í˜„ì¬ ê³„ì•½ ì¤‘ì¸ ë³´ì¦ê¸ˆ</small>
          </div>
          <div class="field">
            <label>í˜„ì¬ ì›”ì„¸</label>
            <input type="text" id="rentCurrent" placeholder="ì˜ˆ: 500,000" oninput="formatNumber(this)">
            <small>í˜„ì¬ ê³„ì•½ ì¤‘ì¸ ì›”ì„¸</small>
          </div>
          <div class="field">
            <label>ë³€ê²½ ë³´ì¦ê¸ˆ</label>
            <input type="text" id="rentNewDeposit" placeholder="ì˜ˆ: 5,000,000" oninput="formatNumber(this)">
            <small>ë³€ê²½í•˜ë ¤ëŠ” ë³´ì¦ê¸ˆ</small>
          </div>
          <div class="field">
            <label>ì „ì›”ì„¸ì „í™˜ìœ¨ (%)</label>
            <input type="number" id="rentConversionRate" placeholder="ì˜ˆ: 5.0" step="0.1" value="5.0">
            <small>í•œêµ­ì€í–‰ ê¸°ì¤€ (2024ë…„ ê¸°ì¤€ ì•½ 5.0%)</small>
          </div>
        </div>

        <div class="tool-actions">
          <button class="btn-primary" onclick="calcRent()">ê³„ì‚°í•˜ê¸°</button>
          <button class="btn-secondary" onclick="resetRent()">ì´ˆê¸°í™”</button>
        </div>

        <div id="rentResult" class="rent-result-table" style="display:none;">
          <table>
            <thead>
              <tr>
                <th>í•­ëª©</th>
                <th>ë³€ê²½ ì „</th>
                <th>ë³€ê²½ í›„</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ì„ëŒ€ë³´ì¦ê¸ˆ(ì›)</td>
                <td id="rentDepositBefore"></td>
                <td id="rentDepositAfter"></td>
              </tr>
              <tr>
                <td>ì›” ì„ëŒ€ë£Œ(ì›)</td>
                <td id="rentMonthlyBefore"></td>
                <td id="rentMonthlyAfter"></td>
              </tr>
              <tr class="highlight-row">
                <td>ì—° ì„ëŒ€ë£Œ(ì›)</td>
                <td id="rentYearlyBefore"></td>
                <td id="rentYearlyAfter"></td>
              </tr>
            </tbody>
          </table>
          <div class="footer-note" style="margin-top: 16px;">
            ì£¼íƒì„ëŒ€ì°¨ë³´í˜¸ë²• ì œ7ì¡°ì˜2ì— ë”°ë¼ ì„ëŒ€ë£Œ ì¦ì•¡ì€ 5%ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
            ë³´ì¦ê¸ˆ ë³€ê²½ ì‹œ ì „ì›”ì„¸ì „í™˜ìœ¨ì„ ì ìš©í•˜ì—¬ ì›”ì„¸ë¥¼ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </section>

    <!-- 3. ì·¨ë“ì„¸ -->
    <section id="tool-tax" class="tool-section">
      <div class="tool-card">
        <div class="tool-header">
          <h2>ì·¨ë“ì„¸ ê³„ì‚°ê¸°</h2>
          <p>ë¶€ë™ì‚° ìœ í˜•ë³„ ì·¨ë“ì„¸ì™€ ë¶€ê°€ì„¸ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤</p>
        </div>

        <div class="tool-grid">
          <div class="field">
            <label>ë¶€ë™ì‚° ìœ í˜•</label>
            <select id="taxType" onchange="updateTaxInfo()">
              <option value="house1">ì£¼íƒ (1ì£¼íƒì)</option>
              <option value="house2">ì£¼íƒ (2ì£¼íƒì)</option>
              <option value="house3">ì£¼íƒ (3ì£¼íƒ ì´ìƒ)</option>
              <option value="nonhouse">ì£¼íƒì™¸ (ìƒê°€/ì˜¤í”¼ìŠ¤í…”/í† ì§€)</option>
            </select>
            <small id="taxTypeInfo">ìœ í˜•ì„ ì„ íƒí•˜ë©´ ì„¸ìœ¨ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤</small>
          </div>
          <div class="field">
            <label>ì·¨ë“ê°€ì•¡ (ë§Œì›)</label>
            <input type="number" id="taxPrice" placeholder="ì˜ˆ: 50000">
            <small>ì‹¤ê±°ë˜ê°€ ê¸°ì¤€</small>
          </div>
          <div class="field">
            <label>ì¡°ì •ëŒ€ìƒì§€ì—­ ì—¬ë¶€</label>
            <select id="taxArea">
              <option value="normal">ì¼ë°˜ì§€ì—­</option>
              <option value="regulated">ì¡°ì •ëŒ€ìƒì§€ì—­</option>
            </select>
            <small>ì£¼íƒì˜ ê²½ìš° ì§€ì—­ì— ë”°ë¼ ì„¸ìœ¨ ìƒì´</small>
          </div>
        </div>

        <div class="tool-actions">
          <button class="btn-primary" onclick="calcTax()">ê³„ì‚°í•˜ê¸°</button>
          <button class="btn-secondary" onclick="resetTax()">ì´ˆê¸°í™”</button>
        </div>

        <div id="taxResult" class="result-card" style="display:none;">
          <div class="tax-result-grid">
            <div class="tax-result-left">
              <div class="result-main" id="taxMain"></div>
              <div class="tax-simple-info" id="taxSimple"></div>
            </div>
            <div class="tax-result-right">
              <div class="result-sub" id="taxSub"></div>
            </div>
          </div>
          <div class="footer-note">
            ì‹¤ì œ ì·¨ë“ì„¸ëŠ” ì£¼íƒ ìˆ˜, ë©´ì , ì§€ì—­, ë²•ì¸ ì—¬ë¶€ ë“±ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
            ì •í™•í•œ ì„¸ì•¡ì€ ê´€í•  ì§€ìì²´ ë˜ëŠ” ì„¸ë¬´ì‚¬ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </section>

    <!-- 4. ì¤‘ê°œìˆ˜ìˆ˜ë£Œ -->
    <section id="tool-fee" class="tool-section">
      <div class="tool-card">
        <div class="tool-header">
          <h2>ì¤‘ê°œìˆ˜ìˆ˜ë£Œ ê³„ì‚°ê¸°</h2>
          <p>ë¶€ë™ì‚° ê±°ë˜ ìœ í˜•ë³„ ì¤‘ê°œë³´ìˆ˜ ìƒí•œìš”ìœ¨ì„ ê³„ì‚°í•©ë‹ˆë‹¤</p>
        </div>

        <div class="tool-grid">
          <div class="field">
            <label>ë¶€ë™ì‚° ìœ í˜•</label>
            <select id="feeType" onchange="updateFeeInfo()">
              <option value="house">ì£¼íƒ</option>
              <option value="officetel">ì˜¤í”¼ìŠ¤í…”</option>
              <option value="store">ìƒê°€Â·ì í¬</option>
              <option value="land">í† ì§€</option>
            </select>
            <small id="feeTypeInfo">ìœ í˜•ë³„ ìƒí•œìš”ìœ¨ì´ ë‹¤ë¦…ë‹ˆë‹¤</small>
          </div>
          <div class="field">
            <label>ê±°ë˜ ìœ í˜•</label>
            <select id="feeTradeType" onchange="toggleFeeInputs()">
              <option value="sale">ë§¤ë§¤</option>
              <option value="lease">ì„ëŒ€ì°¨</option>
            </select>
            <small>ë§¤ë§¤/ì„ëŒ€ì°¨ì— ë”°ë¼ ìš”ìœ¨ ìƒì´</small>
          </div>
          
          <div class="field" id="feePriceField">
            <label>ê±°ë˜ê¸ˆì•¡ (ì›)</label>
            <input type="text" id="feePrice" placeholder="ì˜ˆ: 500,000,000" oninput="formatNumber(this)">
            <small>ë§¤ë§¤ê°€ ì…ë ¥</small>
          </div>
          
          <div class="field" id="feeDepositField" style="display:none;">
            <label>ë³´ì¦ê¸ˆ (ì›)</label>
            <input type="text" id="feeDeposit" placeholder="ì˜ˆ: 50,000,000" oninput="formatNumber(this)">
            <small>ì„ëŒ€ì°¨ ë³´ì¦ê¸ˆ</small>
          </div>
          <div class="field" id="feeMonthlyField" style="display:none;">
            <label>ì›”ì„¸ (ì›)</label>
            <input type="text" id="feeMonthly" placeholder="ì˜ˆ: 1,000,000" oninput="formatNumber(this)">
            <small>ì›”ì„¸ (ì›”ì„¸ Ã— 100ìœ¼ë¡œ í™˜ì‚°)</small>
          </div>
        </div>

        <div class="tool-actions">
          <button class="btn-primary" onclick="calcFee()">ê³„ì‚°í•˜ê¸°</button>
          <button class="btn-secondary" onclick="resetFee()">ì´ˆê¸°í™”</button>
        </div>

        <div id="feeResult" class="result-card" style="display:none;">
          <div class="result-main" id="feeMain"></div>
          <div class="result-sub" id="feeSub"></div>
          <div class="footer-note">
            ì „êµ­ ê³µí†µ ìƒí•œìš”ìœ¨ì…ë‹ˆë‹¤. ì‹¤ì œ ì¤‘ê°œë³´ìˆ˜ëŠ” ê±°ë˜ ë‹¹ì‚¬ì ê°„ í˜‘ì˜ë¡œ ì¡°ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
            ê±°ë˜ê¸ˆì•¡ êµ¬ê°„ì— ë”°ë¼ ìƒí•œìš”ìœ¨ì´ ë‹¤ë¥´ê²Œ ì ìš©ë©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </section>

    <footer>
      <footer-content>
        <span class="footer-brand">í•˜ì´íƒ‘ë¶€ë™ì‚°</span>
        <span class="footer-divider">Â·</span>
        <a href="tel:031-949-8969" class="footer-phone">031-949-8969</a>
      </footer-content>
    </footer>
  </div>
  <script>
// ========== Tab Switching ==========
const tabButtons = document.querySelectorAll('.tab-button');
const toolSections = document.querySelectorAll('.tool-section');

tabButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    const tool = btn.getAttribute('data-tool');
    tabButtons.forEach(b => b.classList.remove('active'));
    toolSections.forEach(sec => sec.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tool-' + tool).classList.add('active');
  });
});

// ========== Number Formatting ==========
function formatNumber(input) {
  let value = input.value.replace(/[^\d]/g, '');
  if (value) {
    input.value = Number(value).toLocaleString();
  } else {
    input.value = '';
  }
}

function parseFormattedNumber(value) {
  return Number(value.replace(/,/g, ''));
}

// ========== 1. Yield Calculator ==========
function updateYieldAcqTax() {
  const priceManWon = Number(document.getElementById('price').value || 0);
  if (priceManWon > 0) {
    const estimatedTax = Math.round(priceManWon * 0.046);
    document.getElementById('acqTax').value = estimatedTax.toLocaleString();
  } else {
    document.getElementById('acqTax').value = '';
  }
}

function calcYield() {
  const priceManWon = Number(document.getElementById('price').value || 0);
  const rentManWon = Number(document.getElementById('rent').value || 0);
  const depositManWon = Number(document.getElementById('deposit').value || 0);
  const acqTaxText = document.getElementById('acqTax').value.replace(/[^0-9]/g, '');
  const acqTaxManWon = Number(acqTaxText || 0);

  if (!priceManWon || !rentManWon) {
    alert('ë§¤ë§¤ê°€ì™€ ì›” ì„ëŒ€ë£ŒëŠ” í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.');
    return;
  }

  const annualRentManWon = rentManWon * 12;
  const totalInvestManWon = priceManWon - depositManWon;
  const yieldRate = totalInvestManWon > 0 ? (annualRentManWon / totalInvestManWon) * 100 : 0;

  document.getElementById('yieldAnnual').textContent = annualRentManWon.toLocaleString() + 'ë§Œì›';
  document.getElementById('yieldInvest').textContent = totalInvestManWon.toLocaleString() + 'ë§Œì›';
  document.getElementById('yieldRate').textContent = yieldRate.toFixed(2) + '%';
  document.getElementById('yieldTaxInfo').textContent = 'ì·¨ë“ì„¸ (4.6%, ì°¸ê³ ) ' + acqTaxManWon.toLocaleString() + 'ë§Œì›';

  document.getElementById('yieldResult').style.display = 'block';
}

function resetYield() {
  ['price','rent','deposit','acqTax'].forEach(id => {
    document.getElementById(id).value = '';
  });
  document.getElementById('yieldResult').style.display = 'none';
}

// ========== 2. Rent Calculator ==========
function calcRent() {
  const current = parseFormattedNumber(document.getElementById('rentCurrent').value || '0');
  const deposit = parseFormattedNumber(document.getElementById('rentDeposit').value || '0');
  const newDeposit = parseFormattedNumber(document.getElementById('rentNewDeposit').value || '0');
  const conversionRate = Number(document.getElementById('rentConversionRate').value || 5.0);

  if (!current || !deposit || !newDeposit) {
    alert('í˜„ì¬ ì›”ì„¸, í˜„ì¬ ë³´ì¦ê¸ˆ, ë³€ê²½ ë³´ì¦ê¸ˆì„ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
    return;
  }

  const depositDiff = newDeposit - deposit;
  let finalRent;
  
  if (depositDiff === 0) {
    finalRent = current * 1.05;
  } else {
    const convertedRent = (depositDiff * (conversionRate / 100)) / 12;
    finalRent = current - convertedRent;
    const maxRent = current * 1.05;
    finalRent = Math.min(finalRent, maxRent);
  }
  
  finalRent = Math.max(0, finalRent);

  document.getElementById('rentDepositBefore').textContent = deposit.toLocaleString() + ' ì›';
  document.getElementById('rentMonthlyBefore').textContent = current.toLocaleString() + ' ì›';
  document.getElementById('rentYearlyBefore').textContent = (current * 12).toLocaleString() + ' ì›';

  document.getElementById('rentDepositAfter').textContent = newDeposit.toLocaleString() + ' ì›';
  document.getElementById('rentMonthlyAfter').textContent = Math.round(finalRent).toLocaleString() + ' ì›';
  document.getElementById('rentYearlyAfter').textContent = Math.round(finalRent * 12).toLocaleString() + ' ì›';

  document.getElementById('rentResult').style.display = 'block';
}

function resetRent() {
  ['rentCurrent','rentDeposit','rentNewDeposit','rentConversionRate'].forEach(id => {
    document.getElementById(id).value = '';
  });
  document.getElementById('rentResult').style.display = 'none';
}

// ========== 3. Tax Calculator ==========
function updateTaxInfo() {
  const type = document.getElementById('taxType').value;
  const info = document.getElementById('taxTypeInfo');
  
  const taxInfo = {
    'house1': '1ì£¼íƒì: 6ì–µ ì´í•˜ 1% / 6~9ì–µ ëˆ„ì§„ / 9ì–µ ì´ˆê³¼ 3%',
    'house2': '2ì£¼íƒì: ì¼ë°˜ 1~3% ëˆ„ì§„ / ì¡°ì •ì§€ì—­ 8%',
    'house3': '3ì£¼íƒ ì´ìƒ: ì¼ë°˜ 8% / ì¡°ì •ì§€ì—­ 12%',
    'nonhouse': 'ì£¼íƒì™¸: 4.6% (ìƒê°€/ì˜¤í”¼ìŠ¤í…”/í† ì§€ ë“±)'
  };
  
  info.textContent = taxInfo[type] || '';
}

function calcTax() {
  const type = document.getElementById('taxType').value;
  const price = Number(document.getElementById('taxPrice').value || 0);
  const area = document.getElementById('taxArea').value;

  if (!price) {
    alert('ì·¨ë“ê°€ì•¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
    return;
  }

  let taxRate = 0;
  let localEduRate = 0;
  let farmTax = 0;
  let typeName = '';

  if (type === 'house1') {
    typeName = '1ì£¼íƒì';
    if (price <= 60000) {
      taxRate = 1.0;
    } else if (price <= 90000) {
      taxRate = ((price * 2 / 30000) - 3) * 1;
    } else {
      taxRate = 3.0;
    }
    localEduRate = 0.1;
  } else if (type === 'house2') {
    typeName = '2ì£¼íƒì';
    if (area === 'regulated') {
      taxRate = 8.0;
    } else {
      if (price <= 60000) taxRate = 1.0;
      else if (price <= 90000) taxRate = ((price * 2 / 30000) - 3) * 1;
      else taxRate = 3.0;
    }
    localEduRate = 0.1;
  } else if (type === 'house3') {
    typeName = '3ì£¼íƒ ì´ìƒ';
    if (area === 'regulated') {
      taxRate = 12.0;
    } else {
      taxRate = 8.0;
    }
    localEduRate = 0.1;
  } else if (type === 'nonhouse') {
    typeName = 'ì£¼íƒì™¸';
    taxRate = 4.6;
    localEduRate = 0;
    farmTax = 0;
  }

  const mainTax = price * (taxRate / 100);
  const localTax = mainTax * localEduRate;
  
  const totalTax = mainTax + localTax + farmTax;
  const totalRate = ((totalTax / price) * 100).toFixed(2);

  const main = document.getElementById('taxMain');
  const simple = document.getElementById('taxSimple');
  const sub = document.getElementById('taxSub');

  main.innerHTML = typeName + ' ì·¨ë“ì„¸ ì´ì•¡<br><span class="result-highlight">' + 
    Math.round(totalTax).toLocaleString() + 'ë§Œì›</span>';

  let simpleText = '<strong>ì´ ì„¸ìœ¨: ' + totalRate + '%</strong>';
  simpleText += '<div>' + price.toLocaleString() + 'ë§Œì› Ã— ' + totalRate + '% = ' + 
    Math.round(totalTax).toLocaleString() + 'ë§Œì›</div>';
  simple.innerHTML = simpleText;

  let subText = '<strong>ì„¸ê¸ˆ ê³„ì‚° ìƒì„¸</strong><br><br>';
  
  if (type === 'nonhouse') {
    subText += '<strong>ì ìš© ì„¸ìœ¨</strong><br>';
    subText += 'ì£¼íƒì™¸ ë¶€ë™ì‚° (ìƒê°€/ì˜¤í”¼ìŠ¤í…”/í† ì§€ ë“±)<br>';
    subText += 'í†µí•© ì„¸ìœ¨: 4.6%<br>';
    subText += '(ì·¨ë“ì„¸ 4% + ë†íŠ¹ì„¸ 0.2% + ì§€ë°©êµìœ¡ì„¸ 0.4%)<br><br>';
  } else if (type === 'house1' || (type === 'house2' && area !== 'regulated')) {
    subText += '<strong>ì ìš© ì„¸ìœ¨ êµ¬ê°„</strong><br>';
    if (price <= 60000) {
      subText += 'ì·¨ë“ê°€ì•¡ 6ì–µì› ì´í•˜ â†’ ì·¨ë“ì„¸ìœ¨ 1%<br>';
    } else if (price <= 90000) {
      subText += 'ì·¨ë“ê°€ì•¡ 6ì–µ ì´ˆê³¼ 9ì–µ ì´í•˜<br>';
      subText += 'ëˆ„ì§„ì„¸ìœ¨: (ì·¨ë“ê°€ì•¡ Ã— 2/3ì–µì› - 3) Ã— 1/100<br>';
      subText += 'ì ìš©ì„¸ìœ¨: ' + taxRate.toFixed(2) + '%<br>';
    } else {
      subText += 'ì·¨ë“ê°€ì•¡ 9ì–µì› ì´ˆê³¼ â†’ ì·¨ë“ì„¸ìœ¨ 3%<br>';
    }
    subText += '<br>';
  } else if (type === 'house3') {
    subText += '<strong>ì ìš© ì„¸ìœ¨</strong><br>';
    if (area === 'regulated') {
      subText += '3ì£¼íƒ ì´ìƒ (ì¡°ì •ëŒ€ìƒì§€ì—­) â†’ 12%<br><br>';
    } else {
      subText += '3ì£¼íƒ ì´ìƒ (ì¼ë°˜ì§€ì—­) â†’ 8%<br><br>';
    }
  }
  
  subText += '<strong>ì„¸ëª©ë³„ ë‚´ì—­</strong><br>';
  
  if (type === 'nonhouse') {
    subText += 'ì´ ì„¸ìœ¨: ' + taxRate.toFixed(1) + '%<br>';
    subText += 'ì´ ì„¸ì•¡: ' + Math.round(totalTax).toLocaleString() + 'ë§Œì›<br>';
  } else {
    subText += 'ì·¨ë“ì„¸ (' + taxRate.toFixed(1) + '%): ' + Math.round(mainTax).toLocaleString() + 'ë§Œì›<br>';
    subText += 'ì§€ë°©êµìœ¡ì„¸ (ì·¨ë“ì„¸ì˜ ' + (localEduRate * 100).toFixed(0) + '%): ' + 
      Math.round(localTax).toLocaleString() + 'ë§Œì›<br>';
    
    if (farmTax > 0) {
      subText += 'ë†ì–´ì´ŒíŠ¹ë³„ì„¸ (0.2%): ' + Math.round(farmTax).toLocaleString() + 'ë§Œì›<br>';
    } else {
      subText += 'ë†ì–´ì´ŒíŠ¹ë³„ì„¸: ì—†ìŒ (ì£¼íƒ ë©´ì œ)<br>';
    }
  }
  
  if (area === 'regulated' && type === 'house2') {
    subText += '<br>âš ï¸ ì¡°ì •ëŒ€ìƒì§€ì—­ ì¤‘ê³¼ì„¸ìœ¨ ì ìš©';
  }

  sub.innerHTML = subText;
  document.getElementById('taxResult').style.display = 'block';
}

function resetTax() {
  document.getElementById('taxPrice').value = '';
  document.getElementById('taxResult').style.display = 'none';
}

// ========== 4. Fee Calculator ==========
function toggleFeeInputs() {
  const tradeType = document.getElementById('feeTradeType').value;
  const priceField = document.getElementById('feePriceField');
  const depositField = document.getElementById('feeDepositField');
  const monthlyField = document.getElementById('feeMonthlyField');
  
  if (tradeType === 'sale') {
    priceField.style.display = 'block';
    depositField.style.display = 'none';
    monthlyField.style.display = 'none';
  } else {
    priceField.style.display = 'none';
    depositField.style.display = 'block';
    monthlyField.style.display = 'block';
  }
}

function updateFeeInfo() {
  const type = document.getElementById('feeType').value;
  const info = document.getElementById('feeTypeInfo');
  
  const feeInfo = {
    'house': 'ì£¼íƒ: 0.3~0.7% (ê¸ˆì•¡ êµ¬ê°„ë³„)',
    'officetel': 'ì˜¤í”¼ìŠ¤í…”: ë§¤ë§¤ 0.5% / ì„ëŒ€ 0.4%',
    'store': 'ìƒê°€Â·ì í¬: 0.9%',
    'land': 'í† ì§€: 0.9%'
  };
  
  info.textContent = feeInfo[type] || '';
}

function calcFee() {
  const type = document.getElementById('feeType').value;
  const tradeType = document.getElementById('feeTradeType').value;
  
  let price = 0;
  
  if (tradeType === 'sale') {
    const priceText = document.getElementById('feePrice').value || '0';
    price = parseFormattedNumber(priceText);
  } else {
    const depositText = document.getElementById('feeDeposit').value || '0';
    const monthlyText = document.getElementById('feeMonthly').value || '0';
    const deposit = parseFormattedNumber(depositText);
    const monthly = parseFormattedNumber(monthlyText);
    price = deposit + (monthly * 100);
  }

  if (!price) {
    if (tradeType === 'sale') {
      alert('ê±°ë˜ê¸ˆì•¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
    } else {
      alert('ë³´ì¦ê¸ˆê³¼ ì›”ì„¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
    }
    return;
  }

  let maxRate = 0;
  let typeName = '';

  if (type === 'house' && tradeType === 'sale') {
    typeName = 'ì£¼íƒ ë§¤ë§¤';
    if (price < 50000000) maxRate = 0.6;
    else if (price < 200000000) maxRate = 0.5;
    else if (price < 900000000) maxRate = 0.4;
    else if (price < 1200000000) maxRate = 0.5;
    else if (price < 1500000000) maxRate = 0.6;
    else maxRate = 0.7;
  } else if (type === 'house' && tradeType === 'lease') {
    typeName = 'ì£¼íƒ ì„ëŒ€';
    if (price < 50000000) maxRate = 0.5;
    else if (price < 100000000) maxRate = 0.4;
    else if (price < 600000000) maxRate = 0.3;
    else if (price < 1200000000) maxRate = 0.4;
    else if (price < 1500000000) maxRate = 0.5;
    else maxRate = 0.6;
  } else if (type === 'officetel' && tradeType === 'sale') {
    typeName = 'ì˜¤í”¼ìŠ¤í…” ë§¤ë§¤';
    maxRate = 0.5;
  } else if (type === 'officetel' && tradeType === 'lease') {
    typeName = 'ì˜¤í”¼ìŠ¤í…” ì„ëŒ€';
    maxRate = 0.4;
  } else if (type === 'store' || type === 'land') {
    typeName = type === 'store' ? 'ìƒê°€Â·ì í¬ ë“± ì£¼íƒì™¸' : 'í† ì§€ ë“± ì£¼íƒì™¸';
    maxRate = 0.9;
  }

  const maxFee = price * (maxRate / 100);
  const vat = maxFee * 0.1;
  const totalFee = maxFee + vat;

  const main = document.getElementById('feeMain');
  const sub = document.getElementById('feeSub');

  main.innerHTML = typeName + ' ì¤‘ê°œë³´ìˆ˜ (ë¶€ê°€ì„¸ í¬í•¨)<br><span class="result-highlight">' + 
    Math.round(totalFee).toLocaleString() + 'ì›</span>';

  let subText = '<strong>ìƒí•œìš”ìœ¨:</strong> ' + maxRate.toFixed(1) + '%<br>';
  
  if (tradeType === 'lease') {
    const depositText = document.getElementById('feeDeposit').value || '0';
    const monthlyText = document.getElementById('feeMonthly').value || '0';
    const deposit = parseFormattedNumber(depositText);
    const monthly = parseFormattedNumber(monthlyText);
    
    subText += '<strong>ë³´ì¦ê¸ˆ:</strong> ' + deposit.toLocaleString() + 'ì›<br>';
    subText += '<strong>ì›”ì„¸:</strong> ' + monthly.toLocaleString() + 'ì›<br>';
    subText += '<strong>í™˜ì‚°ê¸ˆì•¡:</strong> ' + deposit.toLocaleString() + ' + (' + monthly.toLocaleString() + ' Ã— 100) = ' + price.toLocaleString() + 'ì›<br>';
  } else {
    subText += '<strong>ê±°ë˜ê¸ˆì•¡:</strong> ' + price.toLocaleString() + 'ì›<br>';
  }
  
  subText += '<br><strong>ìˆ˜ìˆ˜ë£Œ ë‚´ì—­</strong><br>';
  subText += 'ì¤‘ê°œë³´ìˆ˜: ' + Math.round(maxFee).toLocaleString() + 'ì›<br>';
  subText += 'ë¶€ê°€ì„¸ (10%): ' + Math.round(vat).toLocaleString() + 'ì›<br>';
  subText += '<strong>ì´ ê¸ˆì•¡: ' + Math.round(totalFee).toLocaleString() + 'ì›</strong>';

  sub.innerHTML = subText;
  document.getElementById('feeResult').style.display = 'block';
}

function resetFee() {
  document.getElementById('feePrice').value = '';
  document.getElementById('feeDeposit').value = '';
  document.getElementById('feeMonthly').value = '';
  document.getElementById('feeResult').style.display = 'none';
}

// ========== Initialize ==========
window.addEventListener('load', () => {
  updateTaxInfo();
  updateFeeInfo();
});
  </script>
  <script>
if ("serviceWorker" in navigator) {
  window.addEventListener("load", function () {
    navigator.serviceWorker.register("sw.js");
  });
}
</script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/hitop-unified-calculator/sw.js')
        .catch(err => console.error('SW registration failed:', err));
    });
  }
</script>
</body>
</html>

</body>
</html>
